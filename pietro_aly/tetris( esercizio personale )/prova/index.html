<label for="color-input">Inserisci un colore:</label>
<input type="text" id="color-input" name="color-input">
<button id="set-color-button">Imposta colore</button>

<div id="error-message"></div>
<style>
  #error-message {
    color: red;
    font-weight: bold;
  }
</style>
<script>
  const colorInput = document.getElementById("color-input");
  const setColorButton = document.getElementById("set-color-button");
  const errorMessage = document.getElementById("error-message");

  setColorButton.addEventListener("click", function() {
    const color = colorInput.value.trim();

    if (isValidColor(color)) {
      document.body.style.backgroundColor = color;
      errorMessage.textContent = "";
    } else {
      errorMessage.textContent = "Il valore inserito non è un colore valido.";
    }
  });

  function isValidColor(color) {
    // Normalizza il colore (rimuove gli spazi, converte in lowercase)
    color = color.replace(/\s/g, "").toLowerCase();

    // Verifica se il colore è un nome di colore supportato dal browser
    const namedColors = window.getComputedStyle(document.documentElement).getPropertyValue('--color-named').trim().split(', ');
    if (namedColors.includes(color)) {
      return true;
    }

    // Verifica se il colore è un codice RGB valido
    const match = color.match(/^rgb\((\d{1,3}),(\d{1,3}),(\d{1,3})\)$/);
    if (match) {
      const r = parseInt(match[1]);
      const g = parseInt(match[2]);
      const b = parseInt(match[3]);
      if (r >= 0 && r <= 255 && g >= 0 && g <= 255 && b >= 0 && b <= 255) {
        return true;
      }
    }

    // Verifica se il colore è un codice esadecimale valido
    if (/^#([0-9a-f]{3}){1,2}$/.test(color)) {
      return true;
    }

    // Se non è un colore valido, restituisci false
    return false;
  }
</script>
